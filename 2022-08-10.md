<h2><img src='https://sprofile.line-scdn.net/0hKvToEWyOFFl5FgPUaxBqJglGFzNaZ01LXHRabxhFTDlNI1taBiVZaB5CSjtHJ1YJACJSN0xFHjp1BWM_Z0DobX4mSm5AIFEMXHhbuQ' width=30 height=30>NiJia Lin, 忍者です</h2>
Markdown to HTML by Github API https://gist.github.com/louis70109/bfc722790051807dac10458f234b0cf3<br />
gcloud auth login<br>
gcloud auth configure-docker xxx.pkg.dev


<a id="user-content-title-標題題目categories-學習紀錄tags" class="anchor" href="#title-%E6%A8%99%E9%A1%8C%E9%A1%8C%E7%9B%AEcategories-%E5%AD%B8%E7%BF%92%E7%B4%80%E9%8C%84tags" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>title: 【標題】題目
categories: 學習紀錄
tags:</h2>
<p><a href="https://camo.githubusercontent.com/10cf61e72423b718ed29f357cf77c7250b42773c8136a8c83636604355e7d3a0/68747470733a2f2f6e696a69616c696e2e636f6d2f696d616765732f636f6d6d6f6e2e6a706567" target="_blank" rel="nofollow"><img src="https://camo.githubusercontent.com/10cf61e72423b718ed29f357cf77c7250b42773c8136a8c83636604355e7d3a0/68747470733a2f2f6e696a69616c696e2e636f6d2f696d616765732f636f6d6d6f6e2e6a706567" alt="" data-canonical-src="https://nijialin.com/images/common.jpeg" style="max-width:100%;"></a></p>
<h1>
<a id="user-content-前言" class="anchor" href="#%E5%89%8D%E8%A8%80" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>前言</h1>
<p>隨著大影片時代開始，人們開始拍攝各種題材的題目，身為創作者的你最痛的點是什麼？影片？題材？對我來說就是字幕問題！人人看影片都需要字幕的部分，那該怎麼減輕上字幕的工作呢？這次就利用 GCP 上的服務(STT, GCS)，分享當中使用的一些眉眉角角，至少先讓你可以擁有一個入門級的字幕，降低大家初期在做影片所花的時間，把精力放多一點到創作上，最後在搭配 video.js 來展示。</p>
<ul>
<li><a href="https://coscup.org/2022/zh-TW/session/P7HXPX" rel="nofollow">分享的議程</a></li>
<li><a href="https://hackmd.io/@coscup/r1TovCJ65/%2F%40coscup%2Frk8ivC1a5" rel="nofollow">大會共筆</a></li>
</ul>

<blockquote>
<p>此次在 COSCUP 2022 分享內容是日常的 Side Project</p>
</blockquote>
<h1>
<a id="user-content-主題圍繞" class="anchor" href="#%E4%B8%BB%E9%A1%8C%E5%9C%8D%E7%B9%9E" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>主題圍繞</h1>
<ul>
<li>凡事總有個原因</li>
<li>Speech-To-Text</li>
<li>Cloud Storage</li>
<li>IAM &amp; Role</li>
<li>Cloud Run</li>
<li>Youtube &amp; Video.js</li>
<li>Take Away</li>
</ul>
<h2>
<a id="user-content-凡事總有個原因" class="anchor" href="#%E5%87%A1%E4%BA%8B%E7%B8%BD%E6%9C%89%E5%80%8B%E5%8E%9F%E5%9B%A0" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>凡事總有個原因</h2>
<ol>
<li>減少獨自製作影片的 effort</li>
<li>增加被平台看見的機會</li>
<li>想紅</li>
</ol>
<h3>
<a id="user-content-這個專案怎麼能增進效率呢" class="anchor" href="#%E9%80%99%E5%80%8B%E5%B0%88%E6%A1%88%E6%80%8E%E9%BA%BC%E8%83%BD%E5%A2%9E%E9%80%B2%E6%95%88%E7%8E%87%E5%91%A2" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>這個專案怎麼能增進效率呢？</h3>
&lt;iframe class="speakerdeck-iframe" frameborder="0" src="<a href="https://speakerdeck.com/player/d069e1978c504743b6509a7fc336c0fb?slide=6" rel="nofollow">https://speakerdeck.com/player/d069e1978c504743b6509a7fc336c0fb?slide=6</a>" title="GCCP Creator @ COSCUP 2022" allowfullscreen="true" mozallowfullscreen="true" webkitallowfullscreen="true" style="border: 0px; background: padding-box padding-box rgba(0, 0, 0, 0.1); margin: 0px; padding: 0px; border-radius: 6px; box-shadow: rgba(0, 0, 0, 0.2) 0px 5px 40px; width: 560px; height: 314px;" data-ratio="1.78343949044586"&gt;&lt;/iframe&gt;
<p>製作影片之前花費的功夫就有許多硬體、拍攝手法、剪輯相關，但這些就我目前經驗而言應該大家體會的過程都會是一樣。</p>
<p>而在這個過程中我們能做的事情就是透過雲端服務來處理<code>逐字稿</code>-<code>對時間線</code>-<code>輸出SRT</code>，到底能怎麼做呢？</p>
<h3>
<a id="user-content-使用-cc-字幕的原因" class="anchor" href="#%E4%BD%BF%E7%94%A8-cc-%E5%AD%97%E5%B9%95%E7%9A%84%E5%8E%9F%E5%9B%A0" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>使用 CC 字幕的原因</h3>
&lt;iframe class="speakerdeck-iframe" frameborder="0" src="<a href="https://speakerdeck.com/player/d069e1978c504743b6509a7fc336c0fb?slide=7" rel="nofollow">https://speakerdeck.com/player/d069e1978c504743b6509a7fc336c0fb?slide=7</a>" title="GCCP Creator @ COSCUP 2022" allowfullscreen="true" mozallowfullscreen="true" webkitallowfullscreen="true" style="border: 0px; background: padding-box padding-box rgba(0, 0, 0, 0.1); margin: 0px; padding: 0px; border-radius: 6px; box-shadow: rgba(0, 0, 0, 0.2) 0px 5px 40px; width: 560px; height: 314px;" data-ratio="1.78343949044586"&gt;&lt;/iframe&gt;
<h4>
<a id="user-content-優點篇" class="anchor" href="#%E5%84%AA%E9%BB%9E%E7%AF%87" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>優點篇</h4>
<ul>
<li>不必等字幕做完才出影片</li>
<li>上字幕難免出錯，修改快速</li>
<li>自適應(不受解析度影響)</li>
<li>提高影片曝光率(Youtube 識別)</li>
<li>Youtube 編輯器夠用</li>
<li>額外優惠
<ul>
<li>幫助聽障人士</li>
<li>電腦版有自動翻譯</li>
<li>有機會讓粉絲幫忙共編</li>
</ul>
</li>
</ul>
<h4>
<a id="user-content-缺點篇" class="anchor" href="#%E7%BC%BA%E9%BB%9E%E7%AF%87" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>缺點篇</h4>
<ul>
<li>預設是關閉，需要訓練用戶</li>
<li>中文觀眾習慣看內字幕</li>
<li>字卡特效較少(不夠吸睛)
<ul>
<li>會擋住原本的特效，有個遮罩 embed 在最前面</li>
</ul>
</li>
</ul>
<h2>
<a id="user-content-我在講它要聽-️-開啟-speechtotext" class="anchor" href="#%E6%88%91%E5%9C%A8%E8%AC%9B%E5%AE%83%E8%A6%81%E8%81%BD-%EF%B8%8F-%E9%96%8B%E5%95%9F-speechtotext" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>我在講它要聽！ <g-emoji class="g-emoji" alias="writing_hand" fallback-src="https://github.githubassets.com/images/icons/emoji/unicode/270d.png">✍️</g-emoji> 開啟 SpeechToText</h2>
&lt;iframe class="speakerdeck-iframe" frameborder="0" src="<a href="https://speakerdeck.com/player/d069e1978c504743b6509a7fc336c0fb?slide=12" rel="nofollow">https://speakerdeck.com/player/d069e1978c504743b6509a7fc336c0fb?slide=12</a>" title="GCCP Creator @ COSCUP 2022" allowfullscreen="true" mozallowfullscreen="true" webkitallowfullscreen="true" style="border: 0px; background: padding-box padding-box rgba(0, 0, 0, 0.1); margin: 0px; padding: 0px; border-radius: 6px; box-shadow: rgba(0, 0, 0, 0.2) 0px 5px 40px; width: 560px; height: 314px;" data-ratio="1.78343949044586"&gt;&lt;/iframe&gt;
<p>通常我們在使用服務時，都會很習慣進 UI 看一下這服務能做到些什麼事，而 STT 的 UI 上就是一些常見設定，來源、編碼、取樣率...，讓還在觀察測試的用戶可以先稍微玩看看了解 STT 能力到哪，在進行 API 使用的部分。</p>
<h2>
<a id="user-content-總會需要個玻璃櫃--建立-cloud-storage" class="anchor" href="#%E7%B8%BD%E6%9C%83%E9%9C%80%E8%A6%81%E5%80%8B%E7%8E%BB%E7%92%83%E6%AB%83--%E5%BB%BA%E7%AB%8B-cloud-storage" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>總會需要個玻璃櫃 <g-emoji class="g-emoji" alias="t-rex" fallback-src="https://github.githubassets.com/images/icons/emoji/unicode/1f996.png">🦖</g-emoji> 建立 Cloud Storage</h2>
&lt;iframe class="speakerdeck-iframe" frameborder="0" src="<a href="https://speakerdeck.com/player/d069e1978c504743b6509a7fc336c0fb?slide=16" rel="nofollow">https://speakerdeck.com/player/d069e1978c504743b6509a7fc336c0fb?slide=16</a>" title="GCCP Creator @ COSCUP 2022" allowfullscreen="true" mozallowfullscreen="true" webkitallowfullscreen="true" style="border: 0px; background: padding-box padding-box rgba(0, 0, 0, 0.1); margin: 0px; padding: 0px; border-radius: 6px; box-shadow: rgba(0, 0, 0, 0.2) 0px 5px 40px; width: 560px; height: 314px;" data-ratio="1.78343949044586"&gt;&lt;/iframe&gt;
<p>Cloud Storage(GCS) 顧名思義就是要建立一個雲端儲存庫，相當於 AWS S3，除了可以放上東西儲存以外，也可以透過它去介接其他的服務，此篇後面將會透過 Eventarc 去介接 Cloud Storage 與 Cloud Run。</p>
<blockquote>
<p>GCS 與 AWS S3 經常也會被拿來放置前端編譯完放置檔案的地方，再透過其他 DNS route 之類的功能，借接起來把前端資訊打在用戶的瀏覽器上。
其他參考 <a href="https://nijialin.com/2019/10/12/Day28-%E7%94%A8-S3-%E5%B9%AB%E5%BF%99%E8%BD%89%E5%9D%80%E5%88%B0%E5%8E%9F%E6%9C%89%E7%9A%84%E6%9C%8D%E5%8B%99%E4%B8%8A/" rel="nofollow">Day28 - 用 AWS S3 幫忙轉址到原有的服務上</a></p>
</blockquote>
<h2>
<a id="user-content-而且要有鎖頭--來點-iam--role" class="anchor" href="#%E8%80%8C%E4%B8%94%E8%A6%81%E6%9C%89%E9%8E%96%E9%A0%AD--%E4%BE%86%E9%BB%9E-iam--role" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>而且要有鎖頭 <g-emoji class="g-emoji" alias="closed_lock_with_key" fallback-src="https://github.githubassets.com/images/icons/emoji/unicode/1f510.png">🔐</g-emoji> 來點 IAM &amp; Role</h2>
&lt;iframe class="speakerdeck-iframe" frameborder="0" src="<a href="https://speakerdeck.com/player/d069e1978c504743b6509a7fc336c0fb?slide=19" rel="nofollow">https://speakerdeck.com/player/d069e1978c504743b6509a7fc336c0fb?slide=19</a>" title="GCCP Creator @ COSCUP 2022" allowfullscreen="true" mozallowfullscreen="true" webkitallowfullscreen="true" style="border: 0px; background: padding-box padding-box rgba(0, 0, 0, 0.1); margin: 0px; padding: 0px; border-radius: 6px; box-shadow: rgba(0, 0, 0, 0.2) 0px 5px 40px; width: 560px; height: 314px;" data-ratio="1.78343949044586"&gt;&lt;/iframe&gt;
<p>首先要先到 GCP 左上的找到 <code>IAM &amp; Role</code>，找到 Service Account(服務帳戶) 建立授權過的帳號。</p>
&lt;iframe class="speakerdeck-iframe" frameborder="0" src="<a href="https://speakerdeck.com/player/d069e1978c504743b6509a7fc336c0fb?slide=20" rel="nofollow">https://speakerdeck.com/player/d069e1978c504743b6509a7fc336c0fb?slide=20</a>" title="GCCP Creator @ COSCUP 2022" allowfullscreen="true" mozallowfullscreen="true" webkitallowfullscreen="true" style="border: 0px; background: padding-box padding-box rgba(0, 0, 0, 0.1); margin: 0px; padding: 0px; border-radius: 6px; box-shadow: rgba(0, 0, 0, 0.2) 0px 5px 40px; width: 560px; height: 314px;" data-ratio="1.78343949044586"&gt;&lt;/iframe&gt;
<p>順利建立完後會出現有兩種方式的金鑰讓你選擇使用，這邊一般會使用 <code>JSON 的檔案</code>來與雲端服務串接 API 使用。</p>
&lt;iframe class="speakerdeck-iframe" frameborder="0" src="<a href="https://speakerdeck.com/player/d069e1978c504743b6509a7fc336c0fb?slide=21" rel="nofollow">https://speakerdeck.com/player/d069e1978c504743b6509a7fc336c0fb?slide=21</a>" title="GCCP Creator @ COSCUP 2022" allowfullscreen="true" mozallowfullscreen="true" webkitallowfullscreen="true" style="border: 0px; background: padding-box padding-box rgba(0, 0, 0, 0.1); margin: 0px; padding: 0px; border-radius: 6px; box-shadow: rgba(0, 0, 0, 0.2) 0px 5px 40px; width: 560px; height: 314px;" data-ratio="1.78343949044586"&gt;&lt;/iframe&gt;
<p>這邊與大家分享一個切身之痛的事情，之前有次因為與 .gitignore 發生了點誤會，不小心把 JSON Key 往 GitHub 踢，結果導致 Key 被抓到拿去做壞壞的事，因此被寄了通知信鎖住帳號 QAQ，所以以下提供一些之前文章有做過的做法給大家，盡可能必免把 Key 踢出去的方法。</p>
<ul>
<li>建立一個暫時檔</li>
<li>路徑放環境變數中</li>
<li>寫入 <code>GOOGLE_APPLICATION_CREDENTIALS</code>
</li>
<li>
<g-emoji class="g-emoji" alias="warning" fallback-src="https://github.githubassets.com/images/icons/emoji/unicode/26a0.png">⚠️</g-emoji> 需要框架啟動前</li>
<li>
<g-emoji class="g-emoji" alias="warning" fallback-src="https://github.githubassets.com/images/icons/emoji/unicode/26a0.png">⚠️</g-emoji> 需整理成 JSON 樣式</li>
<li>單引號 -&gt; 雙引號</li>
</ul>
<blockquote>
<p>更詳細內容請參考我之前寫的文章：<a href="https://nijialin.com/2022/04/02/python-env-import-json-string/" rel="nofollow">把 JSON 字串寫入記憶體中的暫時檔案並放路徑至環境變數中 | Python, FastAPI</a></p>
</blockquote>
<h2>
<a id="user-content-萬事皆上雲-️-如何部署到-gcp" class="anchor" href="#%E8%90%AC%E4%BA%8B%E7%9A%86%E4%B8%8A%E9%9B%B2-%EF%B8%8F-%E5%A6%82%E4%BD%95%E9%83%A8%E7%BD%B2%E5%88%B0-gcp" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>萬事皆上雲 <g-emoji class="g-emoji" alias="partly_sunny" fallback-src="https://github.githubassets.com/images/icons/emoji/unicode/26c5.png">⛅️</g-emoji> 如何部署到 GCP</h2>
<h3>
<a id="user-content-做什麼才會觸發---在-cloudrun-設定-eventarc" class="anchor" href="#%E5%81%9A%E4%BB%80%E9%BA%BC%E6%89%8D%E6%9C%83%E8%A7%B8%E7%99%BC---%E5%9C%A8-cloudrun-%E8%A8%AD%E5%AE%9A-eventarc" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>做什麼才會觸發 - 在 CloudRun 設定 Eventarc</h3>
<h2>
<a id="user-content-不想住這邊我要搬走使用-videojs-的-hints" class="anchor" href="#%E4%B8%8D%E6%83%B3%E4%BD%8F%E9%80%99%E9%82%8A%E6%88%91%E8%A6%81%E6%90%AC%E8%B5%B0%E4%BD%BF%E7%94%A8-videojs-%E7%9A%84-hints" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>不想住這邊，我要搬走！使用 video.js 的 hints</h2>
<h3>
<a id="user-content-cors-那我要去愛別人--api-我還你原形" class="anchor" href="#cors-%E9%82%A3%E6%88%91%E8%A6%81%E5%8E%BB%E6%84%9B%E5%88%A5%E4%BA%BA--api-%E6%88%91%E9%82%84%E4%BD%A0%E5%8E%9F%E5%BD%A2" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>CORS 那我要去愛別人 – API 我還你原形</h3>
<h3>
<a id="user-content-既然你不聽那我來硬的--cli-降肉" class="anchor" href="#%E6%97%A2%E7%84%B6%E4%BD%A0%E4%B8%8D%E8%81%BD%E9%82%A3%E6%88%91%E4%BE%86%E7%A1%AC%E7%9A%84--cli-%E9%99%8D%E8%82%89" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>既然你不聽那我來硬的 – CLI 降肉！</h3>
<h3>
<a id="user-content-過去即是永恆--快取放我走" class="anchor" href="#%E9%81%8E%E5%8E%BB%E5%8D%B3%E6%98%AF%E6%B0%B8%E6%81%86--%E5%BF%AB%E5%8F%96%E6%94%BE%E6%88%91%E8%B5%B0" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>過去即是永恆 – 快取放我走！</h3>
<h3>
<a id="user-content-不都在講同一件事videojs-需要-vtt" class="anchor" href="#%E4%B8%8D%E9%83%BD%E5%9C%A8%E8%AC%9B%E5%90%8C%E4%B8%80%E4%BB%B6%E4%BA%8Bvideojs-%E9%9C%80%E8%A6%81-vtt" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>不都在講同一件事？Video.js 需要 VTT</h3>
<h2>
<a id="user-content-管理大師--的我們能帶走點什麼" class="anchor" href="#%E7%AE%A1%E7%90%86%E5%A4%A7%E5%B8%AB--%E7%9A%84%E6%88%91%E5%80%91%E8%83%BD%E5%B8%B6%E8%B5%B0%E9%BB%9E%E4%BB%80%E9%BA%BC" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>管理大師 <g-emoji class="g-emoji" alias="alarm_clock" fallback-src="https://github.githubassets.com/images/icons/emoji/unicode/23f0.png">⏰</g-emoji> 的我們能帶走點什麼？</h2>
<p><g-emoji class="g-emoji" alias="writing_hand" fallback-src="https://github.githubassets.com/images/icons/emoji/unicode/270d.png">✍️</g-emoji> 揮揮衣袖，不帶走一片雲彩</p>
<ul>
<li>STT 時間支援最低到 nano，但在 Youtube - 字幕上也算很精準</li>
<li>STT 測試起來以一分鐘為分水嶺，太短的影片可能不適用</li>
<li>減少初期敲字幕稿的時間(30~40%)，只需後續細修、對時間</li>
<li>編輯器用別人的就好，別想自己寫 ( <del>還我三個禮拜！</del> )</li>
</ul>
<h1>
<a id="user-content-結論" class="anchor" href="#%E7%B5%90%E8%AB%96" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>結論</h1>
<h1>
<a id="user-content-活動小結" class="anchor" href="#%E6%B4%BB%E5%8B%95%E5%B0%8F%E7%B5%90" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>活動小結</h1>
<p>立即加入「LINE 開發者官方社群」官方帳號，就能收到第一手 Meetup 活動，或與開發者計畫有關的最新消息的推播通知。▼</p>
<p>「LINE 開發者官方社群」官方帳號 ID：@line_tw_dev
<a href="https://camo.githubusercontent.com/34ae407ebd947eb236519a122cef272d5d27bbc666b208c444aac0ea0fb9ba78/68747470733a2f2f7777772e6576616e6c696e2e636f6d2f696d616765732f323032302f6c696e652d74772d6465762d71722e706e67" target="_blank" rel="nofollow"><img src="https://camo.githubusercontent.com/34ae407ebd947eb236519a122cef272d5d27bbc666b208c444aac0ea0fb9ba78/68747470733a2f2f7777772e6576616e6c696e2e636f6d2f696d616765732f323032302f6c696e652d74772d6465762d71722e706e67" alt="" data-canonical-src="https://www.evanlin.com/images/2020/line-tw-dev-qr.png" style="max-width:100%;"></a></p>
<h1>
<a id="user-content-關於line-開發社群計畫" class="anchor" href="#%E9%97%9C%E6%96%BCline-%E9%96%8B%E7%99%BC%E7%A4%BE%E7%BE%A4%E8%A8%88%E7%95%AB" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>關於「LINE 開發社群計畫」</h1>
<p>LINE 於 2019 年開始在台灣啟動「LINE 開發社群計畫」，將長期投入人力與資源在台灣舉辦對內對外、線上線下的開發者社群聚會、徵才日、開發者大會等，已經舉辦 30 場以上的活動。歡迎讀者們能夠持續回來查看最新的狀況。詳情請看:</p>
<ul>
<li><a href="https://engineering.linecorp.com/zh-hant/blog/2021-line-tw-devrel/" rel="nofollow">2021 年 LINE 開發社群計畫活動時程表</a></li>
<li><a href="https://engineering.linecorp.com/zh-hant/blog/2020-line-tw-devrel/" rel="nofollow">2020 年 LINE 開發社群計畫活動時程表</a></li>
<li><a href="https://engineering.linecorp.com/zh-hant/blog/line-taiwan-developer-relations-2019-plan/" rel="nofollow">2019 年 LINE 開發社群計畫活動時程表</a></li>
<li><a href="https://engineering.linecorp.com/zh-hant/blog/line-taiwan-developer-relations-2019/" rel="nofollow">LINE Taiwan Developer Relations 2019 回顧與 2019 開發社群計畫報告</a></li>
</ul>
&lt;style&gt;
  section.compact {
    font-size: 150%
  }
  img[alt~="center"] {
    display: block;
    margin: 0 auto;
  }
&lt;/style&gt;
